# Plainview Environment Configuration
# Copy this file to .env and fill in the values for your environment

# ====================
# ENVIRONMENT
# ====================
ENVIRONMENT=development  # development | staging | production

# ====================
# API SERVER
# ====================
PORT=4000
HOST=0.0.0.0

# ====================
# DATABASE
# ====================
# PostgreSQL connection string (async driver required)
# Format: postgresql+asyncpg://user:password@host:port/database
POSTGRES_URL=postgresql+asyncpg://plainview:CHANGE_ME@localhost:5432/plainview

# For development, you can use SQLite:
# POSTGRES_URL=sqlite+aiosqlite:///./plainview.db

# ====================
# REDIS (Optional)
# ====================
# Used for caching, pub/sub, and session storage
REDIS_URL=redis://localhost:6379

# ====================
# AUTHENTICATION
# ====================
# Enable API key authentication for write endpoints
API_KEY_ENABLED=false  # Set to true in production

# Comma-separated list of valid API keys
# Generate keys with: openssl rand -hex 32
API_KEYS=

# Example (DO NOT USE IN PRODUCTION):
# API_KEYS=dev_key_abc123,prod_key_xyz789

# ====================
# CORS
# ====================
# Comma-separated list of allowed origins
# Leave empty in development to allow localhost
# REQUIRED in production
CORS_ORIGINS=

# Example for production:
# CORS_ORIGINS=https://app.plainview.com,https://dashboard.plainview.com

# ====================
# SUMMIT.OS INTEGRATION (Optional)
# ====================
# Enable integration with Summit.OS autonomy platform
SUMMIT_ENABLED=false

# MQTT broker URL for Summit.OS
# Formats: ws://host:port, wss://host:port, tcp://host:port
SUMMIT_MQTT_URL=ws://localhost:1883

# API key for Summit.OS authentication
SUMMIT_API_KEY=

# Organization ID for multi-tenant deployments
SUMMIT_ORG_ID=

# ====================
# LOGGING & MONITORING
# ====================
# Log level: DEBUG | INFO | WARNING | ERROR | CRITICAL
LOG_LEVEL=INFO

# Enable structured JSON logging
JSON_LOGGING=false  # Set to true in production

# Sentry DSN for error tracking (optional)
# SENTRY_DSN=https://abc123@sentry.io/456789

# ====================
# RATE LIMITING
# ====================
# Max requests per minute for valve actuation endpoints
RATE_LIMIT_VALVE_ACTUATION=10

# Max requests per minute for incident mutations
RATE_LIMIT_INCIDENT_MUTATIONS=20

# ====================
# AUTHENTICATION
# ====================
# Auth mode: none | api_key | jwt
AUTH_MODE=none

# JWT settings (required when AUTH_MODE=jwt)
# Generate secret with: openssl rand -hex 32
JWT_SECRET=plainview-dev-secret-change-me
JWT_EXPIRY_MINUTES=30

# ====================
# SIMULATION
# ====================
# Enable simulation engine + simulated agents (default true in dev)
SIMULATION_MODE=true

# ====================
# METRICS
# ====================
# Enable Prometheus metrics endpoint at /metrics
METRICS_ENABLED=true

# ====================
# FRONTEND (Dashboard)
# ====================
# API base URL for the dashboard to connect to
# Leave empty to use same-origin (default for production)
VITE_API_BASE=http://localhost:4000
